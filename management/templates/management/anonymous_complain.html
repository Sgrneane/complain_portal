{% extends 'footer.html'%}
{% block content %}
{% load static %}
{% include 'header.html'%}

  <div class="container mt-4">
    <div class="row">
        <div id="tab-content-container">
          <div class="p-0">
            <div class="row">
              <div class="main-section-title">
                <a href="" class="section-title">गुनासो दर्ता सम्बन्धि जानकारी</a>
              </div>
              <hr class="main-section-hr">
              <div class="tab-content mt-3" id="myTabContent">
                <div class="row">
                  <p class="label" style="text-align:justify">
                    खाद्य प्रविधि तथा गुण नियन्त्रण विभागले खाद्य स्वचछता तथा गुणस्तर कायममा टेवा पुर्याउने हेतु उपभोक्ता तथा सरोकारवालाहरु को गुनासो सम्वोधनका लागी यस पोर्टल तयार गरेको छ । यस पोर्टलमा खाद्य वस्तुको गुणस्तर तथा स्वच्छता मा संका लागेमा, होटल रेष्टुरेण्टको सरसफाइ तथा खाद्य वस्तुको गुणस्तरमा संका लागेमा,  दाना पदार्थको गुणस्तरमा संका लागेमा तथा विभाग तथा मातहतका कार्यालयहरुवाट प्रदान गरिने सेवामा ढिलासुस्ती तथा कैफियत भेटिएमा यस पोर्टल मार्फत उजुरी गर्न सकिने छ । प्राप्त गुनासो खाद्य प्रविधि तथा गुण नियन्त्रण विभाग ववरमहल काठमाण्डौमा प्राप्त हुने र तत् पश्चात सम्वन्धीत महाशाखा शाखा वा कार्यालयहरुवाट गुनासो संवोधन हुने व्यवस्था मिलाइएको छ । खाद्य स्वच्छता तथा गुण नियन्त्रण कायम राख्न विभागवाट हुदै गरेको उजुरी गुनासो सम्वोधन  सुचना प्रविधिको उपयोग गरि यस पोर्टल मार्फत थप  प्रभावकारी कार्यान्वयन हुने विभागले अपेक्षा लिएको छ । यस पोर्टल मार्फत सहि सुचना तथा आफ्नो आफ्नो क्षेत्रमा भएका खाद्य स्वच्छता तथा गुणस्तर सम्वन्धी समस्या तथा गुनासो देशै भरवाट पठाइ खाद्य स्वच्छता तथा गुण नियन्त्रण कार्यमा सहयोग गर्नुहुन संपुर्ण महानुभावहरुमा विभाग अनुरोध गर्दछ । खाद्य प्रविधि तथा गुण नियन्त्रण विभागको वारेमा थप जानकारी  विभागको वेवसाइट 
                    <a href="http://dftqc.gov.np" target="_blank">Department of Food Technology and Quality Control(dftqc.gov.np)</a> मार्फत प्राप्त गर्न सकिनेछ।  
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="tab-content-container" class="mt-3">
              <div class="main-section-title">
                <a href="" class="section-title">गुनासोको विवरण</a>
              </div>
              <hr class="main-section-hr">

          <form action="{% url 'management:anonymous_complain'%}" method="post" class="mt-5" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="complain-detail-container">
              <div class="complain-details-title">Personal Details ( व्यक्तिगत विवरण )</div>
                <div class="row mt-4">
                    <div class="col-md-3">
                        <p class="label">First Name ( नाम )</p>
                        <input type="text" class="form-control cm" placeholder="Enter first name" name="first_name">
                    </div>
                    <div class="col-md-3">
                        <p class="label">Last Name ( थर )</p>
                        <input type="text" class="form-control cm" placeholder="Enter last name" name="last_name">
                    </div>
                    <div class="col-md-3">
                        <p class="label">Phone No. ( फोन नं.)</p>
                        <input type="text" class="form-control cm" placeholder="Enter phone number" name="phone_number">
                    </div>
                    <div class="col-md-3">
                        <p class="label">Personal Address ( व्यक्तिगत ठेगाना )</p>
                        <input type="text" class="form-control cm" placeholder="Enter personal address" name="person_address">
                    </div>
                </div>
            </div>

            <div class="complain-detail-container mt-5">
              <div class="complain-details-title">Complain Details ( गुनासोको विवरण )</div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <p class="label">Complain Title ( गुनासोको शिर्षक )</p>
                            <input type="text" class="form-control cm" placeholder="Enter complain title" name="complain_title">
                        </div>
                    </div>

                    <div class="row mt-4">
                      <div class="col-md-4">
                          <p class="label">Complain Category ( गुनासोको वर्ग )</p>
                          <select id="category" class="form-select kit-form-control" name="complain_broad_category">
                            <option value="" disabled selected>Select complain category</option>
                            {% for c in complain_category %}
                            <option value="{{c.id}}">{{ c.english_name }}({{ c.nepali_name }})</option>
                            {% endfor %}
                                
                          </select> 
                      </div>

                      <div class="col-md-4">
                        <p class="label">Complain Priority ( गुनासोको प्राथमिकता )</p>
                        <select id="category" class="form-select kit-form-control" name="priority">
                          <option value="" disabled selected>Select complain priority</option>
                              <option value="1">Normal</option>
                              <option value="2">Urgent</option>
                              <option value="3">Very Urgent</option>
                        </select> 
                      </div>

                      <div class="col-md-4">
                          <p class="label">Complain Secrecy ( गुनासोको गोप्यता )</p>
                          <div class="d-flex align-items-center" style="height: 50px;">
                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="complain_secrecy" id="flexRadioDefault1" value="1" checked>
                              <label class="form-check-label label" for="flexRadioDefault1">
                                Required ( चाहिन्छ )
                              </label>
                            </div>
                            <div class="form-check ms-2">
                              <input class="form-check-input" type="radio" name="complain_secrecy" id="flexRadioDefault2" value="0">
                              <label class="form-check-label label" for="flexRadioDefault2">
                                Not Required ( चाहिदैन )
                              </label>
                            </div>
                          </div> 
                      </div>
                      
                    </div>

                    <div class="row mt-4">
                      <p class="data mb-2">Complain Address ( गुनासोको ठेगाना)</p>
                        <div class="col-md-2">
                          <p class="label">Province ( प्रदेश )</p>
                          <select id="province" class="form-select kit-form-control" name="province">
                            <option value="" disabled selected>Select province</option>
                               {% for province in provinces %}
                               <option value="{{ province.id }}">{{province.name}}</option>
                               {% endfor %}
                          </select> 
                        </div>
                        <div class="col-md-3">
                          <p class="label">District ( जिल्ला )</p>
                          <select id="district" class="form-select kit-form-control" name='district'>
                            <option value="" disabled selected>Select District</option>
                          </select> 
                        </div>
                        <div class="col-md-3">
                          <p class="label">Municipality ( पालिका )</p>
                          <select id="municipality" class="form-select kit-form-control" name="municipality">
                            <option value="" disabled selected>Select Municipality</option>
                          
                          </select> 
                        </div>
                        <div class="col-md-4 d-flex">
                          <div>
                            <p class="label">Ward No. ( वडा नं. )</p>
                            <input type="text" class="form-control cm" placeholder="Enter ward no" name="ward">
                          </div>

                          <div class="ms-2">
                            <p class="label">Tole ( टोल )</p>
                            <input type="text" class="form-control cm" placeholder="Enter ward no" name="tole">
                          </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                      <p class="data mb-2">Complain Description ( गुनासोको विवरण )</p>
                        <div class="col-md-12">
                          <p class="label">Description ( विवरण )</p>
                          <textarea name="complain_description" class="form-control" rows="5"></textarea> 
                        </div>
                        <div class="col-md-12 mt-3">
                          <p class="label">Images or Files (if any) ( तस्वीर तथा डकुमेन्ट, यदि भएमा )</p>
                          <input type="file" class="form-control cm" name="complain_image">
                        </div>
                    </div>
              </div>

              <div class="col-md-12 text-end mt-3">
                <button type="submit" class="btn btn-primary">Submit Complain</button>
              </div>

            </div>

            
        </form>

    </div>
  </div>


  <div class="container-fluid public-nav mt-3">
    <div class="container h-100">
      <nav class="navbar navbar-expand-lg h-100" style="box-shadow: none;">
        <div class="container-fluid">
          <div class="collapse navbar-collapse" id="navbarNavDropdown" style="height: 60px;">
            <ul class="navbar-nav h-100"
              style="width: 100%!important; justify-content: center; align-items: center;">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="https://dftqc.gov.np/">© २०२४ खाद्य प्रविधि तथा गुण नियन्त्रण विभाग</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </div>
  {% endblock %}

  {% block scripts %}
  <script>
            $(document).ready(function () {
                $('#province').on('change', function () {
                  var provinceId = $(this).val();
                  $.ajax({
                      url: `nepalmap/get-districts/${provinceId}/`,
                      type: 'GET',
                      success: function (data) {
                          var districtSelect = $('#district');
                          districtSelect.empty();
                          districtSelect.prepend('<option value="" disabled selected>Select District</option>');
                          $.each(data, function (index, district) {
                              districtSelect.append('<option value="' + district.id + '">' + district.name + '</option>');
                          });
                      }
                  });
                })
                $('#district').on('change', function () {
                  var districtId = $(this).val();
                  $.ajax({
                      url: `nepalmap/get-district/get-municipalities/${districtId}/`,
                      type: 'GET',
                      success: function (data) {
                          var municipalitySelect = $('#municipality');
                          municipalitySelect.empty();
                          municipalitySelect.prepend('<option value="" disabled selected>Select Municipality</option>');
                          $.each(data, function (index, municipality) {
                              municipalitySelect.append('<option value="' + municipality.id + '">' + municipality.name + '</option>');
                          });
                      }
                  });
                })
            })
        </script>
        
  {% endblock %}


